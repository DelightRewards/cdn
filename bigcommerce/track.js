const getCookie=e=>{e=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(e)return e[2]},sendPayloadToBackend=(e,t)=>{t=t.getAttribute("data-store");t&&(fetch("https://us-central1-spherical-gate-286620.cloudfunctions.net/sendReferralDataSomewhere",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({store:t,data:e,source:"delightrewards"})}),localStorage.setItem("source","delightrewards"))};window.addEventListener("load",()=>{var e=window.location.search;const t=new URLSearchParams(e);var o=t.get("utm_source"),e=getCookie("XSRF-TOKEN");const a=document.querySelector("#delight-tracker");localStorage.setItem("user-token",e),o&&"delightrewards"===o&&a&&e&&a.getAttribute("data-store")&&sendPayloadToBackend({user:e},a)});