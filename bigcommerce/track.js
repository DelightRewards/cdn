const getCookie=e=>{const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]},sendPayloadToBackend=(e,t)=>{const o=t.getAttribute("data-store");if(o){fetch("https://us-central1-spherical-gate-286620.cloudfunctions.net/sendReferralDataSomewhere",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({store:o,data:e,source:"delightrewards"})})}};window.addEventListener("load",()=>{const e=window.location.search,t=new URLSearchParams(e).get("utm_source"),o=getCookie("XSRF-TOKEN"),a=document.querySelector("#delight-tracker");t&&"delightrewards"===t&&a&&o&&storeName&&sendPayloadToBackend({user:o},a)});